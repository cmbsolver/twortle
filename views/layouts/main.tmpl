<!DOCTYPE html>
<html lang="en" data-bs-theme="light">
<head>
    <meta charset="UTF-8">
    <title>Twortle</title>
    <!-- Bootstrap CSS -->
    <link href="/assets/bootstrap-5.3.8-dist/css/bootstrap.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="/assets/bootstrap-icons-1.13.1/bootstrap-icons.css">

    <style>
            /* Override Bootstrap Dark Theme variables for a Dark Blue look */
            [data-bs-theme="dark"] {
                --bs-body-bg: #0d1b2a;          /* Deep Dark Blue */
                --bs-body-color: #e0e1dd;       /* Off-white text */
                --bs-tertiary-bg: #1b263b;      /* Slightly lighter blue for navbars/cards */
                --bs-border-color: #415a77;     /* Muted blue borders */
                --bs-primary: #778da9;          /* Steel blue for primary actions */
            }

            .navbar-dark-blue {
                background-color: #1b263b !important;
                border-bottom: 1px solid #415a77 !important;
            }

            .navbar-dark-blue .navbar-brand,
            .navbar-dark-blue .nav-link {
                color: #e0e1dd !important;
            }

            /* Sidebar Link Hover Effect */
            .navbar .nav-link:hover {
                background-color: #0b5ed7;
                color: white !important;
                border-radius: 0.375rem;
            }
        </style>
    </head>
    <body class="d-flex flex-column vh-100">
        <!-- Top Navigation Bar Partial -->
        {{template "partials/navbar" .}}

        <!-- Main Workspace -->
        <div class="d-flex flex-grow-1 overflow-hidden">
            <!-- Scrollable Content Area -->
            <div class="flex-grow-1 p-4 overflow-auto">
                {{embed}}
            </div>
        </div>

        <!-- Bootstrap JS Bundle -->
        <script src="/assets/bootstrap-5.3.8-dist/js/bootstrap.min.js"></script>

        <script>
            // Theme Toggling Logic
        const themeToggle = document.getElementById('themeToggle');
        const themeIcon = document.getElementById('themeIcon');
        const htmlElement = document.documentElement;

        // Check local storage or system preference
        const savedTheme = localStorage.getItem('theme');
        const systemTheme = window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
        let currentTheme = savedTheme || systemTheme;

        function setTheme(theme) {
            htmlElement.setAttribute('data-bs-theme', theme);
            localStorage.setItem('theme', theme);
            currentTheme = theme;
            
            if (theme === 'dark') {
                themeIcon.classList.replace('bi-moon-stars-fill', 'bi-sun-fill');
            } else {
                themeIcon.classList.replace('bi-sun-fill', 'bi-moon-stars-fill');
            }
        }

        // Initialize theme
        setTheme(currentTheme);

        themeToggle.addEventListener('click', () => {
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            setTheme(newTheme);
        });
    </script>
</body>
</html>